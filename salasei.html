<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Visita-Sala 6</title>
    <meta name="description" content="Museo Pagliaccetti- Villa Ventilj Mosciano Sant'Angelo">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- A-Frame -->
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="js/components/aframe-tooltip-component.js"></script>
    <script src="js/components/camera-position.js"></script>
    <script src="js/components/link-controls.js"></script>
  </head>
  <body>
    <a-scene
      cursor="rayOrigin: mouse"
      raycaster="far: 100; objects: .clickable, [link];">

      <!-- ASSETS -->
      <a-assets>
        <img id="museopreview" crossorigin="anonymous" src="foto/museopreview.jpg">
        <img id="salasei360_1" crossorigin="anonymous" src="foto/salasei360_1.jpeg">
        <img id="salasei360_2" crossorigin="anonymous" src="foto/salasei360_2.jpeg">
        <img id="salasei360_3" crossorigin="anonymous" src="foto/salasei360_3.jpeg">
        <img id="logo" crossorigin="anonymous" src="logo/villa_ventilj_logo.png">
        <img id="salasettepreview" crossorigin="anonymous" src="foto/salasettepreview.jpg">
        <img id="cambio360" src="icons/cambio360.png"> <!-- icona freccia/cambio -->
      </a-assets>

      <!-- PANORAMA (switchiamo il src di questo sky) -->
      <a-sky id="sky"
             src="#salasei360_1"
             rotation="0 0 0"
             material="shader: flat"></a-sky>

      <!-- FRECCIA per cambiare angolazione (cicla 1→2→3→1) -->
      <a-image id="nextView"
               class="clickable"
               src="#cambio360"
               position="-4 3 -6"
               scale="0.6 0.6 0"
               rotation="0 30 0"
               material="shader: flat; transparent: true; alphaTest: 0.05"
               transparent="true"></a-image>

      <!-- Link ad altra stanza: torna a Sala 5 -->
      <a-link href="salacinque.html"
              title="Torna indietro - Sala 5"
              image="#museopreview"
              position="6 0 -2"
              rotation="0 -60 0"></a-link>

      <!-- Link ad altra stanza: Sala 7 -->
      <a-link href="salasette.html"
              title="Visita - Sala 7"
              image="#salasettepreview"
              position="-5 1 6"
              rotation="0 -50 0"></a-link>

      <!-- Copertura treppiedi + logo -->
      <a-entity position="10 -180 12">
        <a-cylinder radius="50" height="0.5" color="#ffffff"></a-cylinder>
        <a-image src="#logo" position="0 1 0" width="70" height="70"
                 rotation="90 205 0" scale="-1 1 1"></a-image>
      </a-entity>

      <!-- Controller VR (se usi link-controls) -->
      <a-entity id="leftHand"  link-controls="hand: left"></a-entity>
      <a-entity id="rightHand" link-controls="hand: right"></a-entity>
    </a-scene>

    <script>
      // Ciclo tra tre panorami: _1 → _2 → _3 → _1
      const sky = document.getElementById('sky');
      const nextView = document.getElementById('nextView');

      const views = ['#salasei360_1', '#salasei360_2', '#salasei360_3'];
      let idx = 0;

      nextView.addEventListener('click', () => {
        idx = (idx + 1) % views.length;
        sky.setAttribute('src', views[idx]);
      });
    </script>
  </body>
</html>
